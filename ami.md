# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã (–ø–∞—Ç—Ç–µ—Ä–Ω 1-2)

## üìä –ü—Ä–æ–±–ª–µ–º–∞

**–ü–∞—Ç—Ç–µ—Ä–Ω 1-2** (–∑–≤–æ–Ω–∫–∏, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã) –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª **27 —Å–æ–±—ã—Ç–∏–π** –≤–º–µ—Å—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö 8-9, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –∏–∑–±—ã—Ç–æ—á–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫—É.

### –ê–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **1x dial** ‚úÖ (–Ω—É–∂–Ω–æ)
- **6x new_callerid** ‚ùå (5 –ª–∏—à–Ω–∏—Ö)
- **3x bridge_create** ‚ùå (2 –ª–∏—à–Ω–∏—Ö) 
- **6x bridge** ‚ùå (4 –ª–∏—à–Ω–∏—Ö)
- **6x bridge_leave** ‚ùå (4 –ª–∏—à–Ω–∏—Ö)
- **3x bridge_destroy** ‚ùå (2 –ª–∏—à–Ω–∏—Ö)
- **2x hangup** ‚ùå (1 –ª–∏—à–Ω–∏–π)

**–ò—Ç–æ–≥–æ: 27 —Å–æ–±—ã—Ç–∏–π**

## üéØ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ **—É–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** —Å–æ–±—ã—Ç–∏–π —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã, –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ–±—ã—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ (–ø–∞—Ç—Ç–µ—Ä–Ω—ã 1-1, 2-1, 2-2).

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–≤–æ–Ω–∫–æ–≤:
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã:** `web-originate`, `set-extcall-callerid`
- **–ö–∞–Ω–∞–ª—ã:** `Local/xxx@web-originate`

### –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

#### 1. **new_callerid —Å–æ–±—ã—Ç–∏—è**
- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `from-out-office`
- –§–∏–ª—å—Ç—Ä—É–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ CallerID

#### 2. **bridge/bridge_leave —Å–æ–±—ã—Ç–∏—è**
- –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è —Å `Local/` –∫–∞–Ω–∞–ª–∞–º–∏
- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è —Å `SIP/` –∫–∞–Ω–∞–ª–∞–º–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 2 —Å–æ–±—ã—Ç–∏–π –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–∞ –∑–≤–æ–Ω–æ–∫

#### 3. **bridge_create/bridge_destroy —Å–æ–±—ã—Ç–∏—è**
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 1 —Å–æ–±—ã—Ç–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–∞ –∑–≤–æ–Ω–æ–∫
- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

#### 4. **hangup —Å–æ–±—ã—Ç–∏—è**
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 1 —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∑–≤–æ–Ω–æ–∫
- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ hangup —Å–æ–±—ã—Ç–∏–µ

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã:
1. **`listen_AMI_python.py`** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

### –§—É–Ω–∫—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç):
- `is_external_initiated_call()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∏ –∫–∞–Ω–∞–ª–∞–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è `new_callerid` - —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç `from-out-office`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è `bridge`/`bridge_leave` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `Local/` –∫–∞–Ω–∞–ª–æ–≤, –ª–∏–º–∏—Ç 2 —Å–æ–±—ã—Ç–∏—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è `bridge_create`/`bridge_destroy` - –ª–∏–º–∏—Ç 1 —Å–æ–±—ã—Ç–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è `hangup` - –ª–∏–º–∏—Ç 1 —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –∑–≤–æ–Ω–æ–∫
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ `_external_call_active` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –∑–≤–æ–Ω–∫–∞

## üìà –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–∞—Ç—Ç–µ—Ä–Ω 1-2):
- **1x dial** ‚úÖ
- **1x new_callerid** ‚úÖ (—Ç–æ–ª—å–∫–æ from-out-office)
- **1x bridge_create** ‚úÖ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–æ 1)
- **2x bridge** ‚úÖ (—Ç–æ–ª—å–∫–æ SIP –∫–∞–Ω–∞–ª—ã)
- **2x bridge_leave** ‚úÖ (—Ç–æ–ª—å–∫–æ SIP –∫–∞–Ω–∞–ª—ã)
- **1x bridge_destroy** ‚úÖ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–æ 1)
- **1x hangup** ‚úÖ

**–ò—Ç–æ–≥–æ: 9 —Å–æ–±—ã—Ç–∏–π** –≤–º–µ—Å—Ç–æ 27

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø (23.09.2025)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `Listen_AMI_2025-09-23.db`  
**–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π:** **9** ‚úÖ

### –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π:
- `bridge_create`: **1** ‚úÖ
- `bridge`: **2** ‚úÖ
- `dial`: **1** ‚úÖ
- `new_callerid`: **1** ‚úÖ
- `bridge_leave`: **2** ‚úÖ
- `bridge_destroy`: **1** ‚úÖ
- `hangup`: **1** ‚úÖ

### –ú–∞—Ä–∫–µ—Ä –≤–Ω–µ—à–Ω–µ–π –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏:
‚úÖ **`ExternalInitiated: true`** –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏—è—Ö

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ù–∞—á–∞–ª–æ: 2025-09-23 12:22:05
- –û–∫–æ–Ω—á–∞–Ω–∏–µ: 2025-09-23 12:22:21
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 16 —Å–µ–∫—É–Ω–¥

**üéØ –¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π —Å–æ–∫—Ä–∞—â–µ–Ω–æ —Å 27 –¥–æ 9 –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤—Å–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –º–∞—Ä–∫–µ—Ä–∞ –≤–Ω–µ—à–Ω–µ–π –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–û–±—ã—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏** (1-1, 2-1, 2-2) **–ù–ï –ó–ê–¢–†–ê–ì–ò–í–ê–Æ–¢–°–Ø**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫ –≤–Ω–µ—à–Ω–∏–º –∑–≤–æ–Ω–∫–∞–º**
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ **AMIEventLog** (–ø–æ–ª–Ω—ã–π –ª–æ–≥)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Å–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **AlternativeApiLogs** (–æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Ö–æ—Å—Ç
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ 1-2
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ `AlternativeApiLogs`
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–±—ã—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìù –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
logging.info(f"Filtered {event_type} for external call {uniqueid}")
```

---
**–ê–≤—Ç–æ—Ä:** Claude AI Assistant  
**–î–∞—Ç–∞:** 23.09.2025  
**–í–µ—Ä—Å–∏—è:** 1.0
