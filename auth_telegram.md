# üì± –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –í TELEGRAM-–ë–û–¢–ê–•

## üéØ –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Telegram-–±–æ—Ç–∞—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π —Å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (email + SMS).

**–°–¢–ê–¢–£–°**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!

## üìã –ö–û–ú–ü–û–ù–ï–ù–¢–´ –°–ò–°–¢–ï–ú–´

### üîß –°–µ—Ä–≤–∏—Å—ã
- **telegram_auth_service.py** (–ø–æ—Ä—Ç 8016) - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ
- **telegram.sh** - —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–º (start/stop/restart) ‚úÖ
- **nginx** - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ `/telegram-auth/` –Ω–∞ –ø–æ—Ä—Ç 8016 ‚úÖ
- **telegram_auth_handler.py** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è Telegram-–±–æ—Ç–æ–≤ ‚úÖ
- **auth.py** - endpoint –æ—Ç–ø—Ä–∞–≤–∫–∏ email –∫–æ–¥–æ–≤ ‚úÖ
- **desk.py** - –∫–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Telegram-–±–æ—Ç—É ‚úÖ

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **enterprises** - `bot_token`, `chat_id` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è
- **users** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –ø–æ–ª—è–º–∏ –¥–ª—è telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
  - `telegram_auth_code` VARCHAR(6) - –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - `telegram_auth_expires` TIMESTAMP - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞ (10 –º–∏–Ω—É—Ç)
  - `telegram_authorized` BOOLEAN - —Ñ–ª–∞–≥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - `telegram_tg_id` BIGINT - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **telegram_users** - —Å–≤—è–∑–∫–∞ tg_id —Å bot_token –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## üîÑ WORKFLOW –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª (desk)
2. –í–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "üîó Telegram-–±–æ—Ç {enterprise_name}"
3. –°—Å—ã–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞: `https://t.me/{bot_username}?start=auth_{user_id}_{enterprise_number}`

### –®–∞–≥ 2: –ù–∞—á–∞–ª–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç `/start`
2. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç email
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î

### –®–∞–≥ 3: –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ (–¥–µ–π—Å—Ç–≤—É–µ—Ç 10 –º–∏–Ω—É—Ç)
2. –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**:
   - –ù–∞ email (—á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É)
   - –ù–∞ SMS (–µ—Å–ª–∏ –µ—Å—Ç—å `personal_phone`)
3. –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î —Å –≤—Ä–µ–º–µ–Ω–µ–º –∏—Å—Ç–µ—á–µ–Ω–∏—è

### –®–∞–≥ 4: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –≤ –±–æ—Ç–µ
2. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ:
   - `telegram_authorized = TRUE`
   - –ó–∞–ø–∏—Å—å –≤ `telegram_users`
   - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

## üì° API ENDPOINTS

### `POST /telegram-auth/start_auth_flow`
–ù–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```json
{
  "email": "user@example.com",
  "enterprise_number": "0387",
  "telegram_id": 123456789
}
```

### `POST /telegram-auth/verify_code`
–ü—Ä–æ–≤–µ—Ä–∫–∞ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞
```json
{
  "email": "user@example.com",
  "code": "123456",
  "telegram_id": 123456789
}
```

### `GET /telegram-auth/check_auth_status/{telegram_id}`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### `POST /telegram-auth/revoke_auth/{user_id}`
–û—Ç–∑—ã–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### `GET /telegram-auth/status`
–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

## üîß –£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–µ–π –ë–î
```sql
ALTER TABLE users 
ADD COLUMN IF NOT EXISTS telegram_auth_code VARCHAR(6),
ADD COLUMN IF NOT EXISTS telegram_auth_expires TIMESTAMP,
ADD COLUMN IF NOT EXISTS telegram_authorized BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS telegram_tg_id BIGINT;
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```bash
./telegram.sh start    # –ó–∞–ø—É—Å–∫
./telegram.sh stop     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./telegram.sh restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./telegram.sh status   # –°—Ç–∞—Ç—É—Å
./telegram.sh logs     # –õ–æ–≥–∏
./telegram.sh test     # –¢–µ—Å—Ç
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
```bash
./all.sh restart  # –í–∫–ª—é—á–∞–µ—Ç telegram_auth_service
```

## üåê NGINX –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

```nginx
# –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è Telegram Auth —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ—Ä—Ç 8016)
location /telegram-auth/ {
    proxy_pass         http://127.0.0.1:8016/;
    proxy_set_header   Host $host;
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header   X-Forwarded-Proto $scheme;
}
```

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

- **–õ–æ–≥–∏**: `/var/log/telegram_auth_service.log`
- **PID**: `.uvicorn_telegram.pid`
- **–ü–æ—Ä—Ç**: 8016
- **–ê–¥–º–∏–Ω–∫–∞**: –≤–∫–ª—é—á–µ–Ω –≤ –º–æ–¥–∞–ª–∫—É —Å–µ—Ä–≤–∏—Å–æ–≤

## üöÄ –ë–£–î–£–©–ò–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ú–∞—Å—Å–æ–≤—ã–π –æ—Ç–∑—ã–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∑—ã–≤ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ—Ç–¥–µ–ª–∞–º
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
- [ ] –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –°–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—É–¥–∏—Ç–æ–º
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] Backup/restore –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **Email**: auth.py (8015) - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email —Å –∫–æ–¥–æ–º
- **SMS**: send_service_sms.py (8013) - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS
- **–ë–î**: PostgreSQL - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
```
/root/asterisk-webhook/
‚îú‚îÄ‚îÄ telegram_auth_service.py     # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ telegram.sh                  # –°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ all.sh                       # –û–±–Ω–æ–≤–ª–µ–Ω (–¥–æ–±–∞–≤–ª–µ–Ω telegram)
‚îú‚îÄ‚îÄ app/routers/admin.py         # –û–±–Ω–æ–≤–ª–µ–Ω (–º–æ–¥–∞–ª–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤)
‚îî‚îÄ‚îÄ auth_telegram.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### –°–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã
- `8016` - telegram_auth_service.py
- `8015` - auth.py (email —Å–µ—Ä–≤–∏—Å)
- `8013` - send_service_sms.py (SMS —Å–µ—Ä–≤–∏—Å)

## ‚ùó –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ö–æ–¥—ã –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ 10 –º–∏–Ω—É—Ç
2. **–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ—Å—Ç—å**: email + SMS (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω)
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: telegram_users —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `/var/log/telegram_auth_service.log`
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–µ—Ä–≤–∏—Å –≤–∫–ª—é—á–µ–Ω –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ admin.py

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
```bash
curl http://localhost:8016/status
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ nginx
```bash
curl https://bot.vochi.by/telegram-auth/status
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
```sql
SELECT telegram_authorized, telegram_tg_id, email 
FROM users 
WHERE telegram_authorized = TRUE;
```

---
**–°–æ–∑–¥–∞–Ω–æ**: 02.08.2025  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤** - email + SMS
2. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 6-–∑–Ω–∞—á–Ω—ã—Ö –∫–æ–¥–æ–≤  
3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å desk.py** - –∫–Ω–æ–ø–∫–∞ Telegram-–±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. **API endpoints** - –≤—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
6. **Telegram-–±–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** - –∫–æ–º–∞–Ω–¥—ã /start —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: evgeny.baevski@gmail.com (ID: 25)
- **–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ**: 0367 (june) 
- **Telegram ID**: 123456789
- **–°—Ç–∞—Ç—É—Å**: telegram_authorized = TRUE ‚úÖ

## üöÄ –ì–û–¢–û–í–û –ö –í–ù–ï–î–†–ï–ù–ò–Æ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

## üéØ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° (aiogram 2.x)

### ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢:
- **Telegram Auth Service** (–ø–æ—Ä—Ç 8016) - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏** –≤ desk.py - –≤–µ–¥—É—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –±–æ—Ç –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è
- **Email + SMS –∫–æ–¥—ã** - –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- **–ë–æ—Ç –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è 0367** - –∑–∞–ø—É—â–µ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Admin API** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è–º–∏

### üîó –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:
1. –ü–µ—Ä–µ–π—Ç–∏: https://bot.vochi.by/desk/?enterprise=june&number=0367
2. –ö–ª–∏–∫–Ω—É—Ç—å: "üì± Telegram-–±–æ—Ç june"  
3. –ü–æ–ø–∞—Å—Ç—å –Ω–∞: @vochi_june_bot
4. –í–≤–µ—Å—Ç–∏: `/start auth__0367`
5. –í–≤–µ—Å—Ç–∏ email –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
6. –ü–æ–ª—É—á–∏—Ç—å –∏ –≤–≤–µ—Å—Ç–∏ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥

## üìã –ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò –ù–ê AIOGRAM 3.x (–ë–£–î–£–©–ï–ï)

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- [ ] –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö telegram-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] Backup —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- [ ] `pip install aiogram==3.x`
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å handlers –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] –û–±–Ω–æ–≤–∏—Ç—å FSM –∏ Router —Å–∏—Å—Ç–µ–º–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏–∑–æ–ª—è—Ü–∏–∏

### –≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏—è
- [ ] –ü–æ—ç—Ç–∞–ø–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π  
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### –≠—Ç–∞–ø 4: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [ ] –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:** –°–†–ï–î–ù–ò–ô (–ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏)